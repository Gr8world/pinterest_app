{% extends 'base.html' %}

{% block content %}
<h1 class="mb-4">Your Pinterest Analytics</h1>

<!-- Filters -->
<div class="row mb-3">
  <div class="col-md-4">
    <form method="get" class="form-inline">
      {{ filter_form.date_range.label_tag }} {{ filter_form.date_range }}
      <button type="submit" class="btn btn-secondary ml-2">Apply</button>
    </form>
  </div>
  <div class="col-md-4">
    <a id="export-btn" class="btn btn-outline-success" href="/api/export/csv/?board_id=">⬇️ Export CSV</a>
  </div>
</div>

<!-- Boards -->
<h3>Boards</h3>
<div class="row" id="boards-container"></div>

<!-- Pins -->
<div id="pins-section" style="display:none;">
  <h3 class="mt-4" id="selected-board-name"></h3>
  <div class="row" id="pins-container"></div>
</div>

<!-- Analytics -->
<div id="analytics-section" style="display:none;" class="mt-5">
  <h3>Pin Analytics</h3>
  <canvas id="analyticsChart" height="100"></canvas>
</div>

<!-- Audience Insights -->
<div class="mt-5">
  <h3>Audience Insights</h3>
  <div class="row">
    <div class="col-md-4"><canvas id="ageChart" height="200"></canvas></div>
    <div class="col-md-4"><canvas id="genderChart" height="200"></canvas></div>
    <div class="col-md-4"><canvas id="locationChart" height="200"></canvas></div>
  </div>
</div>

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="{% static 'pinterest_app/js/analytics.js' %}"></script>
{% endblock %}
{% endblock %}
